{"version":3,"sources":["pages/dashboard/P2P/Preview/index.jsx"],"names":["PreviewDeal","t","dispatch","useDispatch","history","useHistory","theme","useTheme","xs","useMediaQuery","breakpoints","down","useStyles","makeStyles","title","fontSize","fontWeight","color","paddingBottom","wrapper","background","boxShadow","borderRadius","marginTop","box","display","justifyContent","borderBottom","padding","textAlign","flexWrap","flexDirection","item","supTitle","marginBottom","text","img","width","height","objectFit","button","classes","useState","deal","setDeal","answerCreatedDeals","useSelector","P2PReducer","useEffect","JSON","parse","localStorage","getItem","firstUpdate","React","useRef","useLayoutEffect","current","severity","setTimeout","push","removeItem","setCreatedDeals","alert","open","style","autoHideDuration","anchorOrigin","vertical","horizontal","onClose","variant","message","className","buy_quantity","type","commission","toFixed","typeDeal","sell_currency","buy_currency","sell_quantity","hasFiat","USDTography","bank_card","replace","name_bank_card","phone","sx","sm","md","wordBreak","description","center","latitude","longitude","container","spacing","backgroundColor","onClick","values","createDeals","createDeal"],"mappings":"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","file":"static/js/60.2bd2f2cd.chunk.js","sourcesContent":["import {\n  Container,\n  makeStyles,\n  Typography,\n  Box,\n  useTheme,\n  useMediaQuery,\n  Button,\n  Grid,\n  Snackbar,\n} from \"@material-ui/core\";\nimport { Alert } from \"@mui/material\";\nimport React, { useEffect, useLayoutEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useHistory } from \"react-router\";\nimport Balance from \"../../../../components/Balance\";\nimport Map from \"../../../../components/map/Map\";\nimport { createDeals, setCreatedDeals } from \"../../../../redux/reducers/P2P\";\nconst PreviewDeal = ({ t }) => {\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const theme = useTheme();\n  const xs = useMediaQuery(theme.breakpoints.down(768));\n  const useStyles = makeStyles((theme) => ({\n    title: {\n      fontSize: \"23px\",\n      fontWeight: 600,\n      color: \"#000\",\n      [theme.breakpoints.down(\"md\")]: {\n        paddingBottom: \"16px\",\n        fontSize: 19,\n      },\n    },\n    wrapper: {\n      background: \"#fff\",\n      boxShadow: \"0px 1px 0px #E2E8F0\",\n      borderRadius: \" 12px\",\n      marginTop: 40,\n\n      [theme.breakpoints.down(\"768\")]: {\n        marginTop: 16,\n      },\n    },\n    box: {\n      display: \"flex\",\n      justifyContent: \"space-between\",\n      borderBottom: \"2px solid #E7EAEE\",\n      padding: \"32px 80px\",\n      textAlign: \"center\",\n      flexWrap: \"wrap\",\n      [theme.breakpoints.down(\"md\")]: {\n        padding: \"18px 32px\",\n        flexDirection: \"column\",\n      },\n\n      [theme.breakpoints.down(\"768\")]: {\n        padding: \"16px\",\n      },\n    },\n    item: {\n      [theme.breakpoints.down(\"md\")]: {\n        display: \"flex\",\n        justifyContent: \"space-between\",\n      },\n    },\n    supTitle: {\n      color: \"#64748B\",\n      marginBottom: \"22px\",\n      fontWeight: 300,\n      [theme.breakpoints.down(\"md\")]: {\n        textAlign: \"left\",\n      },\n    },\n    text: {\n      fontSize: 23,\n      color: \"#000\",\n      fontWeight: 600,\n      [theme.breakpoints.down(\"md\")]: {\n        fontSize: 19,\n      },\n    },\n    img: {\n      width: 140,\n      height: 40,\n      objectFit: \"contain\",\n      [theme.breakpoints.down(\"md\")]: {\n        width: 105,\n        height: 23,\n      },\n    },\n    button: {\n      padding: \"17px 0 !important\",\n      width: \"100%\",\n    },\n  }));\n  const classes = useStyles();\n  const [deal, setDeal] = useState([]);\n  const { answerCreatedDeals } = useSelector(({ P2PReducer }) => P2PReducer);\n  useEffect(() => {\n    setDeal(JSON.parse(localStorage.getItem(\"previewp2p\")));\n  }, []);\n  const createDeal = () => {\n    const values = JSON.parse(localStorage.getItem(\"previewp2p\"));\n    values.type === \"card\" &&\n      (values.bank_card = values.bank_card.replace(/\\s/g, \"\"));\n    values.type !== \"card\" && delete values.bank_card;\n    values.type !== \"card\" && delete values.name_bank_card;\n\n    dispatch(createDeals(values));\n  };\n  const firstUpdate = React.useRef(true);\n  useLayoutEffect(() => {\n    if (firstUpdate.current) {\n      firstUpdate.current = false;\n      return;\n    }\n    if (answerCreatedDeals.severity === 201) {\n      setTimeout(() => {\n        history.push(\"/dashboard/p2p/deals\");\n        localStorage.removeItem(\"previewp2p\");\n        dispatch(setCreatedDeals({ ...alert, open: false }));\n      }, 600);\n    }\n    // eslint-disable-next-line\n  }, [answerCreatedDeals.severity]);\n  return (\n    <section style={{ color: \"#000\" }}>\n      <Container>\n        <Snackbar\n          open={answerCreatedDeals.open}\n          autoHideDuration={2000}\n          anchorOrigin={{ vertical: \"top\", horizontal: \"center\" }}\n          onClose={() => dispatch(setCreatedDeals({ ...alert, open: false }))}\n        >\n          <Alert\n            onClose={() => dispatch(setCreatedDeals({ ...alert, open: false }))}\n            severity={answerCreatedDeals.severity === 201 ? \"success\" : \"error\"}\n            variant=\"filled\"\n          >\n            {answerCreatedDeals.severity === 201\n              ? `${t(\"dealSuccessfullyCreated\")}`\n              : answerCreatedDeals?.message}\n          </Alert>\n        </Snackbar>\n        <Balance />\n        <Typography className={classes.title}>{t(\"newDealPreview\")}</Typography>\n        <Box className={classes.wrapper}>\n          <Box className={classes.box}>\n            <Box className={classes.item}>\n              <Typography variant=\"h6\" className={classes.supTitle}>\n                {t(\"GetIt\")}\n              </Typography>\n              <Typography variant=\"h5\" className={classes.text}>\n                {!deal.buy_quantity ? (\n                  \"0.00\"\n                ) : (\n                  <>\n                    {deal.type === 'card2' || deal.type === 'cash2' ? deal.buy_quantity - deal.commission.toFixed(2): deal.buy_quantity }{\" \"}\n                    {deal.typeDeal === \"sell\"\n                      ? deal.sell_currency\n                      : deal.buy_currency}\n                  </>\n                )}\n              </Typography>\n            </Box>\n            <Box className={classes.item}>\n              <Typography variant=\"h6\" className={classes.supTitle}>\n                {t(\"GiveBack\")}\n              </Typography>\n              <Typography variant=\"h5\" className={classes.text}>\n                {!deal.sell_quantity ? (\n                  \"0.00\"\n                ) : (\n                  <>\n                    {deal.sell_quantity}{\" \"}\n                    {deal.typeDeal === \"sell\"\n                      ? deal.buy_currency\n                      : deal.sell_currency}\n                  </>\n                )}\n              </Typography>\n            </Box>\n            {deal.hasFiat && (\n              <Box className={classes.item}>\n                <Typography variant=\"h6\" className={classes.supTitle}>\n                  {t(\"systemCommission\")}\n                </Typography>\n                <Typography variant=\"h5\" className={classes.text}>\n                  {deal.commission && deal.commission.toFixed(2)}{\" \"}\n                  {deal.buy_currency}\n                </Typography>\n              </Box>\n            )}\n            {deal.type === \"card\" && (\n              <Box className={classes.item}>\n                <Typography\n                  USDTography\n                  variant=\"h6\"\n                  className={classes.supTitle}\n                >\n                  {t(\"bankCard\")}\n                </Typography>\n                <Typography variant=\"h5\" className={classes.text}>\n                  {deal.bank_card.replace(/(\\d)(?=(\\d{4})+(\\D|$))/g, \"$1 \")}\n                </Typography>\n              </Box>\n            )}\n            {deal.name_bank_card && (\n              <Box className={classes.item}>\n                <Typography\n                  USDTography\n                  variant=\"h6\"\n                  className={classes.supTitle}\n                >\n                  {t(\"bankName\")}\n                </Typography>\n                <Typography\n                  variant=\"h5\"\n                  className={classes.text}\n                  style={{ width: 230 }}\n                >\n                  {deal?.name_bank_card}\n                </Typography>\n              </Box>\n            )}\n            {(deal.type === \"cash\" || deal.type === \"cash2\" ) && (\n              <Box className={classes.item}>\n                <Typography\n                  USDTography\n                  variant=\"h6\"\n                  className={classes.supTitle}\n                >\n                  {t(\"phoneNumber\")}\n                </Typography>\n                <Typography variant=\"h5\" className={classes.text}>\n                  {deal.phone}\n                </Typography>\n              </Box>\n            )}\n          </Box>\n\n          <Box\n            sx={{\n              padding: {\n                xs: \"16px\",\n                sm: \"18px 32px\",\n                md: \"32px 80px\",\n              },\n            }}\n          >\n            <Typography variant=\"h5\" className={classes.supTitle}>\n              {t(\"Commentary\")}\n            </Typography>\n            <Typography\n              variant=\"body2\"\n              className={classes.text}\n              style={{ wordBreak: \"break-all\" }}\n            >\n              {!deal.description ? (\n                <Typography variant=\"h5\" className={classes.text}>\n                  ----------\n                </Typography>\n              ) : (\n                deal.description\n              )}\n            </Typography>\n          </Box>\n        </Box>\n        {(deal.type === \"cash\" || deal.type === \"cash2\" ) && (\n          <Box style={{ marginTop: 30 }}>\n            <Map center={[deal.latitude, deal.longitude]} />\n          </Box>\n        )}\n        <Grid container spacing={2} style={{ marginTop: xs ? 16 : 24 }}>\n          <Grid xs={12} sm={6} item>\n            <Button\n              className={classes.button}\n              style={{ backgroundColor: \"#000\", color: \"#fff\" }}\n              onClick={() => history.push(\"/dashboard/p2p/createDeals\")}\n            >\n              {t(\"Edit\")}\n            </Button>\n          </Grid>\n          <Grid xs={12} sm={6} item>\n            <Button\n              className={classes.button}\n              style={{ backgroundColor: \"#FCE34D\" }}\n              onClick={() => createDeal()}\n            >\n              {t(\"CreateDeal\")}\n            </Button>\n          </Grid>\n        </Grid>\n      </Container>\n    </section>\n  );\n};\n\nexport default PreviewDeal;\n"],"sourceRoot":""}